---
import { MapPin, Instagram, MessageCircle, Check } from "lucide-astro";

const WHATSAPP_NUMBER = "5493880000000";
const WHATSAPP_LINK = `https://wa.me/${WHATSAPP_NUMBER}?text=Hola%20Team%20Rasta,%20quiero%20más%20info%20sobre%20las%20clases!`;
---

<div class="bg-black p-8 md:p-10 shadow-2xl border-4 border-black relative">
  <div
    class="absolute -top-4 -right-4 w-20 h-20 bg-white/20 blur-xl rounded-full"
  >
  </div>
  <h3 class="text-white text-2xl font-black italic uppercase mb-6">
    Mensaje Rápido
  </h3>

  <form id="contact-form" class="space-y-6">
    <div>
      <label
        for="name"
        class="block text-sm font-bold text-lime-400 uppercase mb-2"
        >Nombre</label
      >
      <input
        required
        type="text"
        id="name"
        class="w-full bg-zinc-900 border border-zinc-800 text-white px-4 py-3 focus:outline-none focus:border-lime-500 focus:ring-1 focus:ring-lime-500 transition-all placeholder-zinc-600"
        placeholder="TU NOMBRE"
      />
    </div>
    <div>
      <label
        for="phone"
        class="block text-sm font-bold text-lime-400 uppercase mb-2"
        >WhatsApp</label
      >
      <input
        required
        type="tel"
        id="phone"
        class="w-full bg-zinc-900 border border-zinc-800 text-white px-4 py-3 focus:outline-none focus:border-lime-500 focus:ring-1 focus:ring-lime-500 transition-all placeholder-zinc-600"
        placeholder="+54 9 ..."
      />
    </div>
    <div>
      <label
        for="interest"
        class="block text-sm font-bold text-lime-400 uppercase mb-2"
        >Interés</label
      >
      <select
        id="interest"
        class="w-full bg-zinc-900 border border-zinc-800 text-white px-4 py-3 focus:outline-none focus:border-lime-500 transition-all"
      >
        <option>Quiero empezar Kickboxing</option>
        <option>Quiero empezar MMA</option>
        <option>Entrenamiento Funcional</option>
        <option>Clase para niños</option>
      </select>
    </div>

    <button
      type="submit"
      id="submit-btn"
      class="w-full font-black uppercase tracking-widest py-4 transition-all flex items-center justify-center bg-lime-500 text-black hover:bg-white"
    >
      <span id="btn-text">Enviar Mensaje</span>
      <span id="success-content" class="hidden flex items-center"
        ><Check class="mr-2" /> ¡Enviado!</span
      >
    </button>
  </form>
</div>

<script>
  function initContactForm() {
    const form = document.getElementById("contact-form");
    const submitBtn = document.getElementById("submit-btn");
    const btnText = document.getElementById("btn-text");
    const successContent = document.getElementById("success-content");

    if (!form) return;

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      // Set Loading State
      submitBtn.setAttribute("disabled", "true");
      btnText.innerText = "Enviando...";

      setTimeout(() => {
        // Set Success State
        submitBtn.classList.remove(
          "bg-lime-500",
          "text-black",
          "hover:bg-white",
        );
        submitBtn.classList.add("bg-green-600", "text-white");
        btnText.classList.add("hidden");
        successContent.classList.remove("hidden");

        // Reset after 3 seconds
        setTimeout(() => {
          submitBtn.removeAttribute("disabled");
          submitBtn.classList.add(
            "bg-lime-500",
            "text-black",
            "hover:bg-white",
          );
          submitBtn.classList.remove("bg-green-600", "text-white");
          btnText.innerText = "Enviar Mensaje";
          btnText.classList.remove("hidden");
          successContent.classList.add("hidden");
          form.reset();
        }, 3000);
      }, 1500);
    });
  }

  initContactForm();
  document.addEventListener("astro:page-load", initContactForm);
</script>
